(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{468:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r,o=n(1),a=n.n(o),i=n(497),c=n.n(i),u=(n(467),n(18)),l=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.render=function(){return a.a.createElement("div",null,a.a.createElement(c.a,{size:this.props.size}),a.a.createElement(u.b,{id:"common.loading"}))},t}(a.a.Component)},472:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,o,a,i=n(22),c=n(1),u=n.n(c),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s=i.a.span.withConfig({displayName:"Prompt"})(r||(r=l(["\n    float: left;\n    width: 120px;\n    color: darkgray;\n   \n"],["\n    float: left;\n    width: 120px;\n    color: darkgray;\n   \n"]))),p=i.a.span.withConfig({displayName:"Content"})(o||(o=l(["\n\n"],["\n\n"]))),f=i.a.div.withConfig({displayName:"Container"})(a||(a=l(["\n    margin-bottom: 1em;\n"],["\n    margin-bottom: 1em;\n"])));function m(e){return u.a.createElement(f,null,u.a.createElement(s,null,e.prompt),u.a.createElement(p,null,e.children))}},495:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,o=n(1),a=n.n(o),i=n(14),c=n(3),u=n(28),l=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return l(r,n),r.prototype.render=function(){return this.userStore.loggedIn?e.length>0&&-1==e.indexOf(this.userStore.user.role)?"Not accessible role. Expected: "+e:a.a.createElement(t,s({},this.props,{token:this.userStore.token,currentRole:this.userStore.user.role})):"Not login"},p([c.Inject,f("design:type","function"==typeof(o=void 0!==u.a&&u.a)&&o||Object)],r.prototype,"userStore",void 0),r;var o}(a.a.Component);return Object(i.observer)(n)}}},584:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(88),o=n.n(r);function a(e){return"string"==typeof e?o.a.parse(e.substring(1)):o.a.parse(e.location.search.substring(1))}},888:function(e,t,n){"use strict";n.r(t);var r,o=n(1),a=n.n(o),i=n(42),c=n(584),u=n(3),l=n(48),s=n(83),p=n(468),f=n(837),m=n.n(f),y=(n(832),r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){return a.a.createElement(m.a,{items:this.props.images.map(function(e){return{original:e,thumbnail:e}})})},t}(a.a.Component),h=n(18),b=n(686),v=n.n(b),w=(n(465),n(464),n(70),n(687)),g=n.n(w),E=(n(653),n(688)),O=n.n(E),_=(n(652),n(472)),j="missions.missionDetail.";function k(e){return a.a.createElement(_.a,{prompt:a.a.createElement(h.b,{id:j+e.promptTextId})},e.children)}var P,I=n(141),R=n.n(I),x=(n(138),n(830)),S=n.n(x),T=(n(501),n(28)),C=n(71),A=n(40),W=n(20),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},L=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},N=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},U=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},q="missions.worker.detailOperationBar.",G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={key:0},t.accept=function(){return N(t,void 0,void 0,function(){var e;return U(this,function(t){switch(t.label){case 0:return e=this.props.missionPublicItem.missionId,[4,this.workerService.acceptMission(e,this.userStore.token)];case 1:return t.sent(),S.a.success(this.localeStore.get(q+"accepted")),this.setState(function(e){return{key:e.key+1}}),[2]}})})},t.renderContent=function(){return N(t,void 0,void 0,function(){var e,t,n,r;return U(this,function(o){switch(o.label){case 0:e=this.props.missionPublicItem,t=e.missionId,n=e.minimalWorkerLevel,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,this.workerService.getInstanceDetail(t,this.userStore.token)];case 2:return o.sent(),[2,a.a.createElement("p",null,a.a.createElement(A.a,{to:"/mission/worker/"+t+"/doWork"},a.a.createElement(R.a,null,a.a.createElement(h.b,{id:q+"continueWorking"}))),a.a.createElement(A.a,{to:"/mission/worker/"+t},a.a.createElement(R.a,null,a.a.createElement(h.b,{id:q+"seeResult"}))))];case 3:return 404!==o.sent().statusCode?[3,5]:[4,this.workerService.getWorkerInfo(this.userStore.user.username,this.userStore.token)];case 4:return r=o.sent().level,console.log(r),r>=n?[2,a.a.createElement(R.a,{type:"primary",onClick:this.accept},a.a.createElement(h.b,{id:q+"accept"}))]:[2,a.a.createElement(R.a,{disabled:!0,type:"primary"},a.a.createElement(h.b,{id:q+"levelNotEnough"}))];case 5:return[2,a.a.createElement("div",null)];case 6:return[3,7];case 7:return[2]}})})},t}return M(t,e),t.prototype.render=function(){return a.a.createElement(s.a,{key:this.state.key,render:this.renderContent})},D([u.Inject,L("design:type","function"==typeof(n=void 0!==T.a&&T.a)&&n||Object)],t.prototype,"userStore",void 0),D([u.Inject,L("design:type","function"==typeof(r=void 0!==C.a&&C.a)&&r||Object)],t.prototype,"workerService",void 0),D([u.Inject,L("design:type","function"==typeof(o=void 0!==W.a&&W.a)&&o||Object)],t.prototype,"localeStore",void 0),t;var n,r,o}(a.a.Component),B=n(14),F=n(5),z=n(29),J=n(22),K=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Q=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},V=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},X=J.a.h1.withConfig({displayName:"Title"})(P||(P=K(["\n  margin-bottom: 16px;\n"],["\n  margin-bottom: 16px;\n"]))),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q(t,e),Object.defineProperty(t.prototype,"showOperationBar",{get:function(){return this.userStore.loggedIn&&this.userStore.user.role===z.b.ROLE_WORKER},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.publicItem,t=e.missionId,n=e.title,r=e.jobCount,o=e.requesterUsername,i=e.allowCustomTag,c=e.allowedTags,u=(e.coverUrl,e.description),l=e.end,s=e.missionType,p=e.start,f=e.topics,m=e.minimalWorkerLevel,y=e.level,d=e.credits;return a.a.createElement(O.a,{gutter:32},a.a.createElement(g.a,{md:12,sm:24},this.props.picPanel),a.a.createElement(g.a,{md:12,sm:24},a.a.createElement(X,null,n),a.a.createElement(k,{promptTextId:"missionId"},t),a.a.createElement(k,{promptTextId:"topics"},f.map(function(e){return a.a.createElement(v.a,{key:e,color:"geekblue"},e)})),a.a.createElement(k,{promptTextId:"tags"},c.map(function(e){return a.a.createElement(v.a,{key:e},e)}),a.a.createElement(h.b,{id:j+"allowCustomTag."+i})),a.a.createElement(k,{promptTextId:"dateRange"},a.a.createElement(h.b,{id:j+"dateRangeFormat",replacements:{start:a.a.createElement(h.a,{formatId:j+"dateFormat",input:p}),end:a.a.createElement(h.a,{formatId:j+"dateFormat",input:l})}})),a.a.createElement(k,{promptTextId:"jobCount"},r),a.a.createElement(k,{promptTextId:"minimalWorkerLevel"},m),a.a.createElement(k,{promptTextId:"level"},y),a.a.createElement(k,{promptTextId:"credits"},d),a.a.createElement(k,{promptTextId:"description"},u),a.a.createElement(k,{promptTextId:"requesterUsername"},o),a.a.createElement(k,{promptTextId:"missionType"},a.a.createElement(h.b,{id:j+s+".name"})),this.props.extraInfo,this.showOperationBar&&a.a.createElement(G,{missionPublicItem:this.props.publicItem})))},H([u.Inject,V("design:type","function"==typeof(n=void 0!==T.a&&T.a)&&n||Object)],t.prototype,"userStore",void 0),H([F.computed,V("design:type",Object),V("design:paramtypes",[])],t.prototype,"showOperationBar",null),t=H([B.observer],t);var n}(a.a.Component),Z=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ee=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($(arguments[t]));return e},te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.render=function(){var e=this.props.detail;return a.a.createElement(Y,{publicItem:e.publicItem,picPanel:a.a.createElement(d,{images:ee([e.publicItem.coverUrl],e.imageUrls)}),extraInfo:a.a.createElement(k,{promptTextId:"IMAGE.imageMissionTypes"},e.imageMissionTypes.map(function(e){return a.a.createElement(v.a,{key:e},a.a.createElement(h.b,{id:"missions.missionDetail.IMAGE.types."+e}))}))})},t}(a.a.Component),ne=n(495),re=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ae=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ie=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},ce=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderPage=function(){return ie(t,void 0,void 0,function(){var e;return ce(this,function(t){switch(t.label){case 0:return console.log(this.props.token),[4,this.missionService.getAMission(this.props.missionId,this.props.token)];case 1:return e=t.sent(),[2,a.a.createElement(te,{detail:e})]}})})},t}return re(t,e),t.prototype.render=function(){return a.a.createElement(s.a,{render:this.renderPage,componentWhenLoading:a.a.createElement(p.a,null)})},oe([u.Inject,ae("design:type","function"==typeof(n=void 0!==l.a&&l.a)&&n||Object)],t.prototype,"missionService",void 0),t=oe([Object(ne.a)()],t);var n}(a.a.Component),le=n(143);n.d(t,"MissionPage",function(){return we});var se=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},fe=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},me=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function ye(){return fe(this,void 0,void 0,function(){var e;return me(this,function(t){switch(t.label){case 0:return[4,n.e(37).then(n.bind(null,901))];case 1:return e=t.sent().RequesterMissionPage,[2,a.a.createElement(e,null)]}})})}function de(){return fe(this,void 0,void 0,function(){var e;return me(this,function(t){switch(t.label){case 0:return[4,n.e(36).then(n.bind(null,896))];case 1:return e=t.sent().WorkerMissionPage,[2,a.a.createElement(e,null)]}})})}var he,be=((he={})[z.b.ROLE_REQUESTER]="requester",he[z.b.ROLE_WORKER]="worker",he),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return se(t,e),t.prototype.render=function(){var e=Object(c.a)(this.props.search).missionId;return e?a.a.createElement(ue,{missionId:e}):a.a.createElement(i.a,{exact:!0,from:"/mission",to:"/mission/"+this.props.redirectTo})},t}(a.a.Component),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return se(t,e),t.prototype.render=function(){var e=be[this.props.currentRole];return a.a.createElement(i.d,null,a.a.createElement(i.b,{exact:!0,path:"/mission",render:function(t){return a.a.createElement(ve,{search:t.location.search,redirectTo:e})}}),a.a.createElement(le.a,{path:"/mission/requester",render:ye}),a.a.createElement(le.a,{path:"/mission/worker",render:de}))},t=pe([Object(ne.a)()],t)}(a.a.Component)}}]);
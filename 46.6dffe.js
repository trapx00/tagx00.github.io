(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1278:function(e,t,n){"use strict";n.r(t);var r,o=n(1),a=n.n(o),i=n(3),c=n(28),l=n(71),u=n(18),f=n(83),s=n(484),p=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}l((r=r.apply(e,t||[])).next())})},h=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.workerInfo=function(){return m(t,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.workerService.getWorkerInfo(this.userStore.user.username,this.userStore.token)];case 1:return e=t.sent(),[2,a.a.createElement("div",null,a.a.createElement(s.a,{prompt:"已接受任务",children:e.acceptedMissionCount}),a.a.createElement(s.a,{prompt:"进行中",children:e.inProgressMissionCount}),a.a.createElement(s.a,{prompt:"已完成",children:e.completedMissionCount}),a.a.createElement(s.a,{prompt:"已放弃",children:e.abandonedMissionCount}))]}})})},t}return p(t,e),t.prototype.render=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,a.a.createElement(u.b,{id:"selfCenter.dashboard"})),a.a.createElement(f.a,{render:this.workerInfo}))},d([i.Inject,y("design:type","function"==typeof(n=void 0!==c.a&&c.a)&&n||Object)],t.prototype,"userStore",void 0),d([i.Inject,y("design:type","function"==typeof(r=void 0!==l.a&&l.a)&&r||Object)],t.prototype,"workerService",void 0),t;var n,r}(a.a.Component),v=n(72),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}l((r=r.apply(e,t||[])).next())})},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requesterInfo=function(){return O(t,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return[4,this.requesterService.getRequesterInfo(this.userStore.user.username,this.userStore.token)];case 1:return e=t.sent(),console.log(e),[2,a.a.createElement("div",null,a.a.createElement(s.a,{prompt:"已发布任务",children:e.submittedMissionCount}),a.a.createElement(s.a,{prompt:"实例任务数",children:e.instanceCount}),a.a.createElement(s.a,{prompt:"进行中",children:e.inProgressInstanceCount}),a.a.createElement(s.a,{prompt:"待评价",children:e.awaitingCommentInstanceCount}),a.a.createElement(s.a,{prompt:"已完成",children:e.finalizedInstanceCount}))]}})})},t}return w(t,e),t.prototype.render=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,a.a.createElement(u.b,{id:"selfCenter.dashboard"})),a.a.createElement(f.a,{render:this.requesterInfo}))},E([i.Inject,g("design:type","function"==typeof(n=void 0!==c.a&&c.a)&&n||Object)],t.prototype,"userStore",void 0),E([i.Inject,g("design:type","function"==typeof(r=void 0!==v.a&&v.a)&&r||Object)],t.prototype,"requesterService",void 0),t;var n,r}(a.a.Component),j=n(81),R=n(893),P=n(1073),k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.render=function(){var e=P.Chart,t=P.Axis;return a.a.createElement("div",null,a.a.createElement(e,{height:400,data:this.props.data,scale:{date:{alias:"日期"},num:{alias:"积累量"}},forceFit:!0},a.a.createElement(t,{name:"date",title:null,tickLine:null,line:{stroke:"#E6E6E6"}}),a.a.createElement(t,{name:"num",line:!1,tickLine:null,grid:null,title:null}),a.a.createElement(P.Tooltip,null),a.a.createElement(P.Geom,{type:"line",position:"date*num",size:1,color:"l (270) 0:rgba(255, 146, 255, 1) .5:rgba(100, 268, 255, 1) 1:rgba(215, 0, 255, 1)",shape:"smooth",style:{shadowColor:"l (270) 0:rgba(21, 146, 255, 0)",shadowBlur:60,shadowOffsetY:6}})))},t}(a.a.Component),S=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},M=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}l((r=r.apply(e,t||[])).next())})},z=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderInfo=function(){return A(t,void 0,void 0,function(){var e,t,n,r,o,i;return z(this,function(c){switch(c.label){case 0:return e={pending:"selfCenter.cardState.inProgress",active:"selfCenter.cardState.submitted",ended:"loginModal.cancel"},t={inProgress:"进行中",submitted:"已提交",awaitingComment:"待评价",finalized:"已完成"},[4,this.adminService.getAdminInfo(this.userStore.token)];case 1:return n=c.sent(),r=[{name:e.pending,value:n.pendingMissionCount},{name:e.active,value:n.activeMissionCount},{name:e.ended,value:n.endedMissionCount}],o=[{name:t.inProgress,value:n.inProgressInstanceCount},{name:t.submitted,value:n.submittedInstanceCount},{name:t.finalized,value:n.finalizeInstanceCount}],i=["#39fc59","#68ff41","#4371ff","#d6ff99"],[t.inProgress,t.submitted,t.awaitingComment,t.finalized],[2,a.a.createElement("div",null,a.a.createElement(s.a,{prompt:"系统用户数",children:n.userCount}),a.a.createElement(s.a,{prompt:"可接受任务数",children:n.activeMissionCount}),a.a.createElement(s.a,{prompt:"未到时间任务数",children:n.pendingMissionCount}),a.a.createElement(s.a,{prompt:"结束任务数",children:n.endedMissionCount}),a.a.createElement(s.a,{prompt:"总任务数",children:n.totalMissionCount}),a.a.createElement(s.a,{prompt:"正在进行实例数",children:n.inProgressInstanceCount}),a.a.createElement(s.a,{prompt:"已提交实例数",children:n.submittedInstanceCount}),a.a.createElement(s.a,{prompt:"已结束实例数",children:n.finalizeInstanceCount}),a.a.createElement("p",null,"任务实例接受和日期折线图"),a.a.createElement(I,{data:n.listOfInstanceDateNum}),a.a.createElement(R.c,{width:500,height:500,style:{display:"inline"}},a.a.createElement(R.b,{isAnimationActive:!1,data:r,dataKey:"value",cx:"30%",cy:"30%",outerRadius:80,label:!0},o.map(function(e,t){return a.a.createElement(R.a,{key:"cell-"+t,fill:i[t]})}))),a.a.createElement(R.c,{width:500,height:500,style:{display:"inline"}},a.a.createElement(R.b,{isAnimationActive:!1,data:o,dataKey:"value",cx:"30%",cy:"30%",outerRadius:80,label:!0},o.map(function(e,t){return a.a.createElement(R.a,{key:"cell-"+t,fill:i[t]})}))))]}})})},t}return S(t,e),t.prototype.render=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,a.a.createElement(u.b,{id:"selfCenter.dashboard"})),a.a.createElement(f.a,{render:this.renderInfo}))},x([i.Inject,M("design:type","function"==typeof(n=void 0!==j.a&&j.a)&&n||Object)],t.prototype,"adminService",void 0),x([i.Inject,M("design:type","function"==typeof(r=void 0!==c.a&&c.a)&&r||Object)],t.prototype,"userStore",void 0),t;var n,r}(a.a.Component),q=n(29);n.d(t,"DashboardPage",function(){return G});var L=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L(t,e),t.prototype.render=function(){switch(this.userStore.user.role){case q.b.ROLE_WORKER:return a.a.createElement(b,null);case q.b.ROLE_REQUESTER:return a.a.createElement(_,null);case q.b.ROLE_ADMIN:return a.a.createElement(D,null);default:return null}},N([i.Inject,T("design:type","function"==typeof(n=void 0!==c.a&&c.a)&&n||Object)],t.prototype,"userStore",void 0),t;var n}(a.a.Component)},484:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r,o,a,i=n(22),c=n(1),l=n.n(c),u=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},f=i.a.span.withConfig({displayName:"Prompt"})(r||(r=u(["\n    float: left;\n    width: 120px;\n    color: darkgray;\n   \n"],["\n    float: left;\n    width: 120px;\n    color: darkgray;\n   \n"]))),s=i.a.span.withConfig({displayName:"Content"})(o||(o=u(["\n\n"],["\n\n"]))),p=i.a.div.withConfig({displayName:"Container"})(a||(a=u(["\n    margin-bottom: 1em;\n"],["\n    margin-bottom: 1em;\n"])));function d(e){return l.a.createElement(p,null,l.a.createElement(f,null,e.prompt),l.a.createElement(s,null,e.children))}}}]);
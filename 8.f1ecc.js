(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{306:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,o=n(0),i=n(6),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onClicked()},t}return a(t,e),t.prototype.render=function(){return o.createElement("input",{className:Object(i.a)("w3-check"),type:"checkbox",checked:this.props.checked,onChange:this.onChange})},t}(o.Component)},307:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r,o=n(25),i=n(16),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}l((r=r.apply(e,t||[])).next())})},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function s(e){return e}var u=function(e){function t(){return e.call(this,"Account")||this}return a(t,e),t.prototype.login=function(e,t){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return t=s(t),[4,this.fetch({route:"Login",queryParams:{username:e,password:t}})];case 1:return[2,n.sent()]}})})},t.prototype.register=function(e,t){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return t=s(t),[4,this.fetch({route:"Register",payload:{username:e,password:t},method:i.a.POST})];case 1:return[2,n.sent()]}})})},t}(o.a)},308:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r,o=n(0),i=(n(4),n(2)),a=n(8),c=n(34),l=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange&&t.props.onChange(e)},t}return l(t,e),t.prototype.render=function(){var e=this;return o.createElement("div",null,o.createElement("label",null,o.createElement("b",null,o.createElement(a.b,{id:this.props.labelTextId})," ",this.props.invalid?o.createElement(a.b,{id:this.props.invalidPromptId}):null)),o.createElement(c.a,{placeholder:this.props.placeholderTextId},function(t){return o.createElement("input",s({className:e.props.className,type:e.props.type,value:e.props.value,onChange:e.handleChange},t))}))},function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([i.action,function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],t.prototype,"handleChange",void 0),t}(o.Component)},39:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,o=n(6),i=n(0),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearError=function(){t.props.onCloseButtonClicked&&t.props.onCloseButtonClicked()},t}return a(t,e),Object.defineProperty(t.prototype,"clickButtonShown",{get:function(){return void 0==this.props.clickButtonShown||this.props.clickButtonShown},enumerable:!0,configurable:!0}),t.prototype.render=function(){return i.createElement("div",{className:Object(o.a)("w3-container")},i.createElement("div",{className:Object(o.a)("w3-panel","w3-red","w3-display-container")},this.clickButtonShown?i.createElement("span",{onClick:this.clearError,className:Object(o.a)("w3-button","w3-red","w3-large","w3-display-topright")},"×"):null,this.props.children))},t}(i.Component)},467:function(e,t,n){"use strict";n.r(t);var r,o,i,a,c=n(39),l=n(0),s=n(6),u=n(4),p=n(5),d=n(2),f=n(308),h=n(32),g=n(307),b=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}l((r=r.apply(e,t||[])).next())})},w=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};(o=r||(r={}))[o.NotLoggedIn=0]="NotLoggedIn",o[o.LoggingIn=1]="LoggingIn",o[o.LoggedIn=2]="LoggedIn",(a=i||(i={}))[a.WrongCredential=0]="WrongCredential",a[a.ServerError=1]="ServerError",a[a.NetworkError=2]="NetworkError";var v,O=new g.a,E=function(){function e(){var e=this;this.logout=function(){e.state=r.NotLoggedIn},this.requestLogin=function(t,n){return m(e,void 0,void 0,function(){var e,o,a,c,l=this;return w(this,function(s){switch(s.label){case 0:return this.state=r.LoggingIn,[4,O.login(t,n)];case 1:if(e=s.sent(),o=e.statusCode,a=e.response,c=e.error,e.ok)return[2,Object(d.runInAction)("requestLogin success",function(){return l.state=r.LoggedIn,a})];throw Object(d.runInAction)("requestLogin failed",function(){return m(l,void 0,void 0,function(){return w(this,function(e){return this.state=r.NotLoggedIn,[2]})})}),401===o?{type:i.WrongCredential}:c.isNetworkError?{type:i.NetworkError,error:c.info}:{type:i.ServerError,messages:a.errorDescriptions}}})})},this.state=r.NotLoggedIn}return b([d.observable,y("design:type",Number)],e.prototype,"state",void 0),b([d.action,y("design:type",Object)],e.prototype,"logout",void 0),b([d.action,y("design:type",Object)],e.prototype,"requestLogin",void 0),e}(),j=n(8),k=(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.render=function(){var e=this.props.error;if(!e)return null;var t=[];switch(e.type){case i.WrongCredential:t.push(l.createElement(j.b,{key:"wrongCredential",id:"loginModal.wrongCredential"}));break;case i.NetworkError:var n=e;console.log(n),t.push(l.createElement(j.b,{key:"networkError",id:"loginModal.networkError"}));break;case i.ServerError:n=e,t.push(l.createElement(j.b,{key:"serverError",id:"loginModal.serverError"})),t.push(l.createElement("br",{key:0}));for(var r=0,o=n.messages;r<o.length;r++){var a=o[r];t.push(l.createElement("br",{key:a})),t.push(a)}}return l.createElement(c.a,{onCloseButtonClicked:this.props.clearError},l.createElement("h3",null,l.createElement(j.b,{id:"loginModal.loginFailed"})),l.createElement("p",null,t))},t}(l.Component),C=n(306),P=n(35),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},L=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}l((r=r.apply(e,t||[])).next())})},N=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.username="",t.password="",t.loginAttempted=!1,t.rememberMe=!1,t.loggedIn=!1,t.lastError=null,t.loginStore=new E,t.rememberMeClicked=function(){t.rememberMe=!t.rememberMe},t.handleUsernameChange=function(e){t.username=e.target.value},t.handlePasswordChange=function(e){t.password=e.target.value},t.validate=function(){return t.usernameValid&&t.passwordValid},t.clearError=function(){t.lastError=null},t.login=function(){return S(t,void 0,void 0,function(){var e,t,n,r=this;return N(this,function(o){switch(o.label){case 0:if(this.loginAttempted=!0,!this.validate())return[2];e=this.props[u.f],this.clearError(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.loginStore.requestLogin(this.username,this.password)];case 2:return t=o.sent(),Object(d.runInAction)("Login successful",function(){r.loggedIn=!0,e.login(t),r.rememberMe&&e.remember(),r.props[u.e].toggleLoginModalShown()}),[3,4];case 3:return n=o.sent(),console.log(n),Object(d.runInAction)("Login failed",function(){r.lastError=n}),[3,4];case 4:return[2]}})})},t.openRegisterModal=function(){t.props[u.e].toggleRegisterModalShown()},t}return M(t,e),Object.defineProperty(t.prototype,"usernameValid",{get:function(){return!this.loginAttempted||""!==this.username},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"passwordValid",{get:function(){return!this.loginAttempted||""!==this.password},enumerable:!0,configurable:!0}),t.prototype.componentWillUnmount=function(){var e=this.props[u.e];this.loggedIn?e.clearLoginPanelFields():e.saveLoginPanelFields({username:this.username,password:this.password,remember:this.rememberMe})},t.prototype.componentDidMount=function(){var e=this,t=this.props[u.e].temporaryLoginPanelFields;t&&Object(d.runInAction)("Initialize fields",function(){e.username=t.username,e.password=t.password,e.rememberMe=t.remember})},t.prototype.render=function(){this.props[u.f];var e=this.props[u.e],t=this.loginStore.state===r.LoggingIn;return l.createElement(h.a,{titleId:"loginModal.title",toggleShown:e.toggleLoginModalShown},l.createElement(_,{error:this.lastError,clearError:this.clearError}),l.createElement("form",{className:Object(s.a)("w3-container")},l.createElement("div",{className:Object(s.a)("w3-section")},l.createElement(f.a,{className:Object(s.a)("w3-input","w3-border","w3-margin-bottom"),type:"text",placeholderTextId:"loginModal.pleaseInputUsername",labelTextId:"loginModal.username",invalid:!this.usernameValid,invalidPromptId:"loginModal.pleaseInputUsername",onChange:this.handleUsernameChange,value:this.username}),l.createElement(f.a,{className:Object(s.a)("w3-input","w3-border"),type:"password",placeholderTextId:"loginModal.pleaseInputPassword",labelTextId:"loginModal.password",invalid:!this.passwordValid,invalidPromptId:"loginModal.pleaseInputPassword",onChange:this.handlePasswordChange,value:this.password}),l.createElement("p",null,l.createElement(C.a,{checked:this.rememberMe,onClicked:this.rememberMeClicked}),l.createElement("span",null,l.createElement(j.b,{id:"loginModal.rememberMe"}))))),l.createElement(h.b,null,l.createElement("button",{onClick:this.openRegisterModal,type:"button",className:Object(s.a)("w3-button","w3-blue","w3-padding")},l.createElement(j.b,{id:"loginModal.register"}),e.registerModalLoading?l.createElement(P.a,null):null),l.createElement("button",{onClick:e.toggleLoginModalShown,type:"button",className:Object(s.a)("w3-button","w3-red","w3-right","w3-padding")},l.createElement(j.b,{id:"loginModal.close"})),l.createElement("button",{onClick:this.login,type:"button",disabled:t,className:Object(s.a)("w3-button","w3-blue","w3-right","w3-padding")},t?l.createElement(j.b,{id:"loginModal.loggingIn"}):l.createElement(j.b,{id:"loginModal.login"}))))},I([d.observable,L("design:type",String)],t.prototype,"username",void 0),I([d.observable,L("design:type",String)],t.prototype,"password",void 0),I([d.observable,L("design:type",Boolean)],t.prototype,"loginAttempted",void 0),I([d.observable,L("design:type",Boolean)],t.prototype,"rememberMe",void 0),I([d.observable,L("design:type",Object)],t.prototype,"lastError",void 0),I([d.observable,L("design:type",E)],t.prototype,"loginStore",void 0),I([d.action,L("design:type",Object)],t.prototype,"rememberMeClicked",void 0),I([d.computed,L("design:type",Object),L("design:paramtypes",[])],t.prototype,"usernameValid",null),I([d.computed,L("design:type",Object),L("design:paramtypes",[])],t.prototype,"passwordValid",null),I([d.action,L("design:type",Object)],t.prototype,"handleUsernameChange",void 0),I([d.action,L("design:type",Object)],t.prototype,"handlePasswordChange",void 0),I([d.action,L("design:type",Object)],t.prototype,"validate",void 0),I([d.action,L("design:type",Object)],t.prototype,"clearError",void 0),I([d.action,L("design:type",Object)],t.prototype,"login",void 0),I([d.action,L("design:type",Object)],t.prototype,"openRegisterModal",void 0),I([Object(p.b)(u.f,u.e),p.c],t)}(l.Component);n.d(t,"AlertPanel",function(){return c.a}),n.d(t,"LoginModal",function(){return x})}}]);